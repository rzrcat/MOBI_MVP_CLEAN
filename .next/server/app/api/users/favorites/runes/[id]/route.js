"use strict";(()=>{var e={};e.id=236,e.ids=[236],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},8967:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>g,requestAsyncStorage:()=>f,routeModule:()=>x,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{DELETE:()=>l,GET:()=>p,POST:()=>d});var o=t(49303),i=t(88716),n=t(60670),a=t(20344),u=t(71615),c=t(87070);async function p(e,{params:r}){let t=(0,a.createRouteHandlerClient)({cookies:u.cookies}),s=r.id,{data:o}=await t.auth.getSession();if(!o?.session?.user)return c.NextResponse.json({isFavorite:!1});let i=o.session.user.id;try{let{data:e}=await t.from("user_favorites").select("id").eq("user_id",i).eq("item_id",s).eq("item_type","rune").maybeSingle();return c.NextResponse.json({isFavorite:!!e})}catch(e){return console.error("Error checking favorite status:",e),c.NextResponse.json({error:"Server error occurred"},{status:500})}}async function d(e,{params:r}){let t=(0,a.createRouteHandlerClient)({cookies:u.cookies}),s=r.id,{data:o}=await t.auth.getSession();if(!o?.session?.user)return c.NextResponse.json({error:"Authentication required"},{status:401});let i=o.session.user.id;try{let{data:e}=await t.from("user_favorites").select("id").eq("user_id",i).eq("item_id",s).eq("item_type","rune").maybeSingle();if(e)return c.NextResponse.json({success:!0,isFavorite:!0});let{error:r}=await t.from("user_favorites").insert({user_id:i,item_id:s,item_type:"rune"});if(r)return console.error("Error adding to favorites:",r),c.NextResponse.json({error:r.message},{status:500});return c.NextResponse.json({success:!0,isFavorite:!0})}catch(e){return console.error("Error adding to favorites:",e),c.NextResponse.json({error:"Server error occurred"},{status:500})}}async function l(e,{params:r}){let t=(0,a.createRouteHandlerClient)({cookies:u.cookies}),s=r.id,{data:o}=await t.auth.getSession();if(!o?.session?.user)return c.NextResponse.json({error:"Authentication required"},{status:401});let i=o.session.user.id;try{let{error:e}=await t.from("user_favorites").delete().eq("user_id",i).eq("item_id",s).eq("item_type","rune");if(e)return console.error("Error removing from favorites:",e),c.NextResponse.json({error:e.message},{status:500});return c.NextResponse.json({success:!0,isFavorite:!1})}catch(e){return console.error("Error removing from favorites:",e),c.NextResponse.json({error:"Server error occurred"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/users/favorites/runes/[id]/route",pathname:"/api/users/favorites/runes/[id]",filename:"route",bundlePath:"app/api/users/favorites/runes/[id]/route"},resolvedPagePath:"/Users/s/Desktop/dev/mobi.gg/src/app/api/users/favorites/runes/[id]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:v}=x,q="/api/users/favorites/runes/[id]/route";function g(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,518,958],()=>t(8967));module.exports=s})();