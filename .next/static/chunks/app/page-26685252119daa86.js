(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2379:function(e,t,r){Promise.resolve().then(r.bind(r,3869))},2706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let s=r(1024),a=s._(r(2265)),l=a.default.createContext(null)},3869:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var s=r(7437),a=r(5068),l=r(9115),o=r(4810);let n=(0,l.U)()((0,o.tJ)(e=>({characters:[],selectedCharacterId:null,addCharacter:t=>e(e=>({characters:[...e.characters,t],selectedCharacterId:t.id})),updateCharacter:(t,r)=>e(e=>({characters:e.characters.map(e=>e.id===t?(0,a._)({},e,r):e)})),deleteCharacter:t=>e(e=>{let r=e.characters.filter(e=>e.id!==t);return{characters:r,selectedCharacterId:e.selectedCharacterId===t&&r.length>0?r[0].id:0===r.length?null:e.selectedCharacterId}}),selectCharacter:t=>e({selectedCharacterId:t})}),{name:"character-storage"}));var i=r(2265),c=r(8965);let d=[{id:"daily-cashshop-free",title:"캐시샵 매일 무료 상품",description:"(계정 1회) 캐시샵에서 매일 무료 상품 1회 수령. 갱신한 아이템 목록은 계정 공유",type:"daily",scope:"account",maxCompletions:1,category:"캐시샵"},{id:"daily-gem-chest",title:"조각난 보석 보물상자",description:"(계정 1회) 캐시샵 - 골드 - 조각난 보석 보물상자",type:"daily",scope:"account",maxCompletions:1,category:"캐시샵"},{id:"daily-dungeon",title:"요일 던전",description:"요일별 전용 던전 1회 클리어",type:"daily",scope:"character",maxCompletions:1,category:"던전"},{id:"daily-blackhole",title:"검은 구멍",description:"30분 단위로 생성",type:"daily",scope:"character",maxCompletions:3,category:"사냥터"},{id:"daily-summon-barrier",title:"불길한 소환의 결계",description:"불길한 소환의 결계 2회 클리어 (3시간 간격 입장)",type:"daily",scope:"character",maxCompletions:2,category:"사냥터"},{id:"daily-tower",title:"망령의 탑",description:"망령의 탑 1회 클리어",type:"daily",scope:"character",maxCompletions:1,category:"던전"},{id:"daily-huntboss-wolf",title:"늑대의 숲 보스",description:"늑대의 숲 보스 각 난이도별 1회 처치",type:"daily",scope:"character",maxCompletions:3,category:"사냥터",difficulties:[{key:"normal",label:"일반",missionId:"daily-huntboss-wolf-normal"},{key:"hard",label:"어려움",missionId:"daily-huntboss-wolf-hard"},{key:"very",label:"매우 어려움",missionId:"daily-huntboss-wolf-very"}]},{id:"daily-huntboss-goddess",title:"여신의 뜰 보스",description:"여신의 뜰 보스 각 난이도별 1회 처치",type:"daily",scope:"character",maxCompletions:3,category:"사냥터",difficulties:[{key:"normal",label:"일반",missionId:"daily-huntboss-goddess-normal"},{key:"hard",label:"어려움",missionId:"daily-huntboss-goddess-hard"},{key:"very",label:"매우 어려움",missionId:"daily-huntboss-goddess-very"}]},{id:"daily-huntboss-ice",title:"얼음협곡 보스",description:"얼음협곡 보스 각 난이도별 1회 처치",type:"daily",scope:"character",maxCompletions:3,category:"사냥터",difficulties:[{key:"normal",label:"일반",missionId:"daily-huntboss-ice-normal"},{key:"hard",label:"어려움",missionId:"daily-huntboss-ice-hard"},{key:"very",label:"매우 어려움",missionId:"daily-huntboss-ice-very"}]},{id:"weekly-fieldboss-peri",title:"필드보스 - 페리",description:"필드보스 페리 1회 처치",type:"weekly",scope:"character",maxCompletions:1,category:"사냥터"},{id:"weekly-fieldboss-krab",title:"필드보스 - 크라브바흐",description:"필드보스 크라브바흐 1회 처치",type:"weekly",scope:"character",maxCompletions:1,category:"사냥터"},{id:"weekly-fieldboss-krama",title:"필드보스 - 크라마",description:"필드보스 크라마 1회 처치",type:"weekly",scope:"character",maxCompletions:1,category:"사냥터"},{id:"weekly-token-exchange",title:"마물 퇴치증표 교환",description:"티르코네일, 던바튼, 콜헨에서 마물 퇴치증표 1회 교환",type:"weekly",scope:"character",maxCompletions:1,category:"교환"},{id:"weekly-raid-glass",title:"레이드 - 글라스 기브넨",description:"레이드(입문) 글라스 기브넨 1회 클리어",type:"weekly",scope:"character",maxCompletions:1,category:"레이드"},{id:"weekly-abyss-ruin",title:"어비스 던전 - 가라앉은 유적",description:"어비스 던전 가라앉은 유적 1회 클리어",type:"weekly",scope:"character",maxCompletions:1,category:"던전"},{id:"weekly-abyss-altar",title:"어비스 던전 - 무너진 제단",description:"어비스 던전 무너진 제단 1회 클리어",type:"weekly",scope:"character",maxCompletions:1,category:"던전"},{id:"weekly-abyss-hall",title:"어비스 던전 - 파멸의 전당",description:"어비스 던전 파멸의 전당 1회 클리어",type:"weekly",scope:"character",maxCompletions:1,category:"던전"}],m=(0,l.U)()((0,o.tJ)((e,t)=>({characterMissionProgress:{},getMissionProgress:(e,r)=>{let s=t().characterMissionProgress[e]||{};return s[r]?s[r]:{completionCount:0,isComplete:!1}},checkMission:(t,r)=>{e(e=>{let s=e.characterMissionProgress[t]||{},l=d.find(e=>e.id===r);if(!l)return{};let o=s[r]||{completionCount:0,isComplete:!1},n=Math.min(o.completionCount+1,l.maxCompletions);return{characterMissionProgress:(0,c._)((0,a._)({},e.characterMissionProgress),{[t]:(0,c._)((0,a._)({},s),{[r]:{completionCount:n,isComplete:n>=l.maxCompletions}})})}})},resetAllMissions:t=>{e(e=>{let r={};return d.forEach(e=>{r[e.id]={completionCount:0,isComplete:!1},e.difficulties&&e.difficulties.forEach(e=>{r[e.missionId]={completionCount:0,isComplete:!1}})}),{characterMissionProgress:(0,c._)((0,a._)({},e.characterMissionProgress),{[t]:r})}})},setMissionCount:(t,r,s)=>{e(e=>{var l,o;let n=e.characterMissionProgress[t]||{},i=d.find(e=>e.id===r),m=null!==(o=null===(l=i)||void 0===l?void 0:l.maxCompletions)&&void 0!==o?o:1;if(i||(i=d.find(e=>{var t;return null===(t=e.difficulties)||void 0===t?void 0:t.some(e=>e.missionId===r)}),m=1),!i)return{};let u=Math.max(0,Math.min(s,m));return{characterMissionProgress:(0,c._)((0,a._)({},e.characterMissionProgress),{[t]:(0,c._)((0,a._)({},n),{[r]:{completionCount:u,isComplete:u>=m}})})}})},setMultipleMissionCounts:(t,r)=>{e(e=>{let s=e.characterMissionProgress[t]||{},l=(0,a._)({},s);return r.forEach(e=>{var t,r;let{missionId:s,count:a}=e,o=d.find(e=>e.id===s),n=null!==(r=null===(t=o)||void 0===t?void 0:t.maxCompletions)&&void 0!==r?r:1;if(o||(o=d.find(e=>{var t;return null===(t=e.difficulties)||void 0===t?void 0:t.some(e=>e.missionId===s)}),n=1),!o)return;let i=Math.max(0,Math.min(a,n));l[s]={completionCount:i,isComplete:i>=n}}),{characterMissionProgress:(0,c._)((0,a._)({},e.characterMissionProgress),{[t]:l})}})}}),{name:"character-mission-progress"}));function u(e){let t={};return e.forEach(e=>{let r=e.category||"기타";t[r]||(t[r]=[]),t[r].push(e)}),t}function g(e){let{description:t}=e,[r,a]=(0,i.useState)(!1);return(0,s.jsxs)("span",{className:"relative inline-block align-middle",children:[(0,s.jsx)("span",{className:"ml-1 text-blue-400 cursor-pointer select-none",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onClick:()=>a(e=>!e),children:"?"}),r&&(0,s.jsx)("div",{className:"absolute z-10 left-1/2 -translate-x-1/2 mt-2 w-max max-w-xs bg-black text-white text-xs rounded px-2 py-1 shadow-lg whitespace-pre-line",children:t})]})}let x={cardBase:"flex items-center gap-3 p-2 sm:p-3 bg-white rounded-lg border shadow-sm cursor-pointer select-none transition-all duration-150 hover:shadow-md focus:ring-2 focus:ring-blue-200 active:bg-gray-50",cardTitleText:"font-semibold text-base truncate",cardDescText:"text-xs text-gray-500 truncate",cardDone:"opacity-60"},h={blue:{cardBorder:"border-blue-200",cardTitle:"text-blue-700",cardCategory:"border-l-4 pl-2 border-blue-200 text-blue-700",textTitle:"text-blue-700"},green:{cardBorder:"border-green-200",cardTitle:"text-green-700",cardCategory:"border-l-4 pl-2 border-green-200 text-green-700",textTitle:"text-green-700"},purple:{cardBorder:"border-purple-200",cardTitle:"text-purple-700",cardCategory:"border-l-4 pl-2 border-purple-200 text-purple-700",textTitle:"text-purple-700"},pink:{cardBorder:"border-pink-200",cardTitle:"text-pink-700",cardCategory:"border-l-4 pl-2 border-pink-200 text-pink-700",textTitle:"text-pink-700"},orange:{cardBorder:"border-orange-200",cardTitle:"text-orange-700",cardCategory:"border-l-4 pl-2 border-orange-200 text-orange-700",textTitle:"text-orange-700"},gray:{cardBorder:"border-gray-200",cardTitle:"text-gray-700",cardCategory:"border-l-4 pl-2 border-gray-200 text-gray-700",textTitle:"text-gray-700"}};function p(e){let{size:t=32,color:r="#FFD600",bg:a="rgba(0,0,0,0.2)"}=e;return(0,s.jsxs)("svg",{width:t,height:t,viewBox:"0 0 48 48",fill:"none",children:[(0,s.jsx)("circle",{cx:"24",cy:"24",r:"20",fill:a}),(0,s.jsx)("circle",{cx:"24",cy:"24",r:"20",stroke:r,strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{d:"M16 25L22 31L33 18",stroke:r,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}function b(e){let{mission:t,progress:r,themeColor:a,themeClasses:l,onSetMissionCount:o}=e;return(0,s.jsxs)("div",{className:[x.cardBase,l.cardBorder,r.isComplete?x.cardDone:""].join(" "),style:"custom"===a?{borderColor:a}:{},tabIndex:0,onClick:()=>{let e=r.isComplete?0:1;o(t.id,e)},children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8",children:r.isComplete?(0,s.jsx)(p,{size:32}):(0,s.jsx)("span",{className:"w-6 h-6 flex-none rounded-full border-2 border-gray-300 flex items-center justify-center"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[(0,s.jsx)("span",{className:[x.cardTitleText,r.isComplete?"line-through text-gray-400":""].join(" "),children:t.title}),(0,s.jsxs)("span",{className:x.cardDescText,children:[t.description,t.description?(0,s.jsx)(g,{description:t.description}):null]})]})]},t.id)}function f(e){let{total:t,completed:r,color:a="blue",customColor:l,onClick:o}=e,n={blue:["bg-blue-200","bg-blue-300","bg-blue-400","bg-blue-500","bg-blue-600","bg-blue-700"],green:["bg-green-200","bg-green-300","bg-green-400","bg-green-500","bg-green-600","bg-green-700"],purple:["bg-purple-200","bg-purple-300","bg-purple-400","bg-purple-500","bg-purple-600","bg-purple-700"],pink:["bg-pink-200","bg-pink-300","bg-pink-400","bg-pink-500","bg-pink-600","bg-pink-700"],orange:["bg-orange-200","bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700"],gray:["bg-gray-200","bg-gray-300","bg-gray-400","bg-gray-500","bg-gray-600","bg-gray-700"]};if("custom"===a&&l)return(0,s.jsx)("div",{className:"battery-bar flex gap-1 w-full max-w-[10rem] h-7 select-none",children:Array.from({length:t}).map((e,t)=>(0,s.jsx)("button",{type:"button","aria-label":"".concat(t+1,"회차 ").concat(t<r?"완료":"미완료"),className:"flex-1 h-full min-w-[2.2rem] rounded border transition-colors duration-100 ".concat(t<r?"":"bg-gray-100 border-gray-300"," ").concat(o?"cursor-pointer hover:ring-2 hover:ring-blue-300 focus:ring-2 focus:ring-blue-400":""),style:t<r?{background:l,borderColor:l}:{},onClick:o?()=>o(t):void 0,tabIndex:0},t))});let i=n[a]||n.blue,c={blue:"border-blue-200",green:"border-green-200",purple:"border-purple-200",pink:"border-pink-200",orange:"border-orange-200",gray:"border-gray-200"}[a]||"border-blue-200";return(0,s.jsx)("div",{className:"battery-bar flex gap-1 w-full max-w-[10rem] h-7 select-none",children:Array.from({length:t}).map((e,t)=>(0,s.jsx)("button",{type:"button","aria-label":"".concat(t+1,"회차 ").concat(t<r?"완료":"미완료"),className:"flex-1 h-full min-w-[2.2rem] rounded border ".concat(c," transition-colors duration-100 ").concat(t<r?i[Math.min(t,i.length-1)]:"bg-gray-100"," ").concat(o?"cursor-pointer hover:ring-2 hover:ring-blue-300 focus:ring-2 focus:ring-blue-400":""),style:{minWidth:0},onClick:o?()=>o(t):void 0,tabIndex:0},t))})}function y(e){let{mission:t,progress:r,themeColor:a,themeClasses:l,onSetMissionCount:o}=e,{cardBorder:n}=l;return(0,s.jsxs)("div",{className:[x.cardBase,n,r.isComplete?x.cardDone:"","justify-between min-h-[3.5rem]"].join(" "),style:"custom"===a?{borderColor:a}:{},tabIndex:0,onClick:()=>{let e=r.isComplete?0:t.maxCompletions;o(t.id,e)},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center min-w-[3.5rem]",children:[(0,s.jsx)(f,{total:t.maxCompletions,completed:r.completionCount,color:["blue","green","purple","pink","orange","gray"].includes(a)?a:"custom",customColor:["blue","green","purple","pink","orange","gray"].includes(a)?void 0:a,onClick:e=>{let s=r.completionCount===e+1?e:e+1;o(t.id,s)}}),(0,s.jsxs)("span",{className:"text-xs text-gray-400 mt-0.5",children:[r.completionCount,"/",t.maxCompletions]})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[(0,s.jsx)("span",{className:[x.cardTitleText,r.isComplete?"line-through text-gray-400":""].join(" "),children:t.title}),(0,s.jsxs)("span",{className:x.cardDescText,children:[t.description,t.description?(0,s.jsx)(g,{description:t.description}):null]})]})]},t.id)}function C(e){let{mission:t,themeColor:r,themeClasses:a,getMissionProgress:l,setMissionCount:o,setMultipleMissionCounts:n}=e,i=t.difficulties.map(e=>l(e.missionId)),c=i.filter(e=>e.isComplete).length,d=c===t.difficulties.length;return(0,s.jsxs)("div",{className:[x.cardBase,a.cardBorder,d?x.cardDone:"","justify-between min-h-[3.5rem]"].join(" "),style:"custom"===r?{borderColor:r}:{},tabIndex:0,onClick:()=>{n(t.difficulties?t.difficulties.map(e=>({missionId:e.missionId,count:d?0:1})):[])},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center min-w-[3.5rem]",children:[(0,s.jsx)(f,{total:t.difficulties.length,completed:c,color:["blue","green","purple","pink","orange","gray"].includes(r)?r:"custom",customColor:["blue","green","purple","pink","orange","gray"].includes(r)?void 0:r,onClick:e=>{if(t.difficulties&&e<t.difficulties.length){let r=i.filter(e=>e.isComplete).length,s=r===e+1?e:e+1;t.difficulties.forEach((e,t)=>{o(e.missionId,t<s?1:0)})}}}),(0,s.jsxs)("span",{className:"text-xs text-gray-400 mt-0.5",children:[c,"/",t.difficulties.length]})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[(0,s.jsx)("span",{className:[x.cardTitleText,d?"line-through text-gray-400":""].join(" "),children:t.title}),(0,s.jsxs)("span",{className:x.cardDescText,children:[t.description,t.description?(0,s.jsx)(g,{description:t.description}):null]})]})]},t.id)}function j(e){let{characterId:t,themeColor:r="blue",showDaily:l=!0,showWeekly:o=!0}=e,{dailyMissions:n,weeklyMissions:g,dailyProgress:x,weeklyProgress:p,getMissionProgress:f,setMissionCount:j,setMultipleMissionCounts:v}=function(e){let{getMissionProgress:t,resetAllMissions:r,setMissionCount:s,setMultipleMissionCounts:a}=m(),{dailyMissions:l,weeklyMissions:o,dailyByCategory:n,weeklyByCategory:i}=function(){let e=d.filter(e=>"daily"===e.type),t=d.filter(e=>"weekly"===e.type);return{dailyMissions:e,weeklyMissions:t,dailyByCategory:u(e),weeklyByCategory:u(t)}}(),c=r=>(function(e,t){let r=e.length,s=e.filter(e=>t(e.id).isComplete).length;return{total:r,completed:s,percent:r?Math.round(s/r*100):0}})(r,r=>t(e,r)),g=c(l),x=c(o);return{dailyMissions:l,weeklyMissions:o,dailyByCategory:n,weeklyByCategory:i,dailyProgress:g,weeklyProgress:x,getMissionProgress:r=>t(e,r),resetAllMissions:()=>r(e),setMissionCount:(t,r)=>s(e,t,r),setMultipleMissionCounts:t=>a(e,t)}}(t),k=function(e){let t=Object.keys(h).includes(e);return t?(0,c._)((0,a._)({},h[e]),{isDefaultColor:!0}):{cardBorder:"",cardTitle:"",cardCategory:"border-l-4 pl-2",textTitle:"",isDefaultColor:!1}}(r),w=m(e=>e.resetAllMissions);i.useEffect(()=>{if(!t)return;let e="lastDailyReset_".concat(t),r="lastWeeklyReset_".concat(t),s=localStorage.getItem(e),a=localStorage.getItem(r),l=!1;(function(e){if(!e)return!0;let t="string"==typeof e?new Date(e):e,r=new Date,s=new Date(r);return s.setHours(6,0,0,0),t<s&&r>=s})(s)&&(w(t),localStorage.setItem(e,new Date().toISOString()),l=!0),function(e){if(!e)return!0;let t="string"==typeof e?new Date(e):e,r=new Date,s=new Date(r),a=s.getDay();return s.setDate(s.getDate()-(a+6)%7),s.setHours(6,0,0,0),t<s&&r>=s}(a)&&(w(t),localStorage.setItem(r,new Date().toISOString()),l=!0),s||l||localStorage.setItem(e,new Date().toISOString()),a||l||localStorage.setItem(r,new Date().toISOString())},[t,w]);let N=e=>!!e.difficulties&&e.difficulties.length>0,F=e=>e.maxCompletions>1&&!N(e),B=e=>{w(t);let r=new Date().toISOString();"daily"===e?localStorage.setItem("lastDailyReset_".concat(t),r):localStorage.setItem("lastWeeklyReset_".concat(t),r)};return(0,s.jsxs)("div",{className:"space-y-6",children:[l&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-bold ".concat(k.textTitle),children:"일일 미션"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-sm",children:[x.completed,"/",x.total," (",x.percent,"%)"]}),(0,s.jsx)("button",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 hover:bg-gray-200 border border-gray-300",onClick:()=>B("daily"),children:"초기화"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>N(e)?(0,s.jsx)(C,{mission:e,themeColor:r,themeClasses:k,getMissionProgress:f,setMissionCount:j,setMultipleMissionCounts:v},e.id):F(e)?(0,s.jsx)(y,{mission:e,progress:f(e.id),themeColor:r,themeClasses:k,onSetMissionCount:j},e.id):(0,s.jsx)(b,{mission:e,progress:f(e.id),themeColor:r,themeClasses:k,onSetMissionCount:j},e.id))})]}),o&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-bold ".concat(k.textTitle),children:"주간 미션"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-sm",children:[p.completed,"/",p.total," (",p.percent,"%)"]}),(0,s.jsx)("button",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 hover:bg-gray-200 border border-gray-300",onClick:()=>B("weekly"),children:"초기화"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>N(e)?(0,s.jsx)(C,{mission:e,themeColor:r,themeClasses:k,getMissionProgress:f,setMissionCount:j,setMultipleMissionCounts:v},e.id):F(e)?(0,s.jsx)(y,{mission:e,progress:f(e.id),themeColor:r,themeClasses:k,onSetMissionCount:j},e.id):(0,s.jsx)(b,{mission:e,progress:f(e.id),themeColor:r,themeClasses:k,onSetMissionCount:j},e.id))})]})]})}r(6691);class v extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,s.jsxs)("div",{className:"p-4 border rounded-md bg-red-50 border-red-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"컴포넌트 로드 중 문제가 발생했습니다"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"string"==typeof(e=this.state.error)?e:e instanceof Error?e.message:"알 수 없는 오류가 발생했습니다."}),(0,s.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"다시 시도"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null}}}let k=["12:00","18:00","20:00","22:00"];function w(){let[e,t]=(0,i.useState)("테스트 알림"),[r,a]=(0,i.useState)("이것은 테스트 알림입니다."),[l,o]=(0,i.useState)("barrier"),[n,c]=(0,i.useState)(10),[d,m]=(0,i.useState)(5),[u,g]=(0,i.useState)(!0),[x,h]=(0,i.useState)(k),[p,b]=(0,i.useState)(!0),[f,y]=(0,i.useState)(!1),[C,j]=(0,i.useState)("12:00"),[v,w]=(0,i.useState)([]),[N,F]=(0,i.useState)(1),B=i.useRef(null),[M,E]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(M){let e=setTimeout(()=>{E(!1)},3e3);return()=>clearTimeout(e)}},[M]);let S=e=>{o(e),"boss"===e?(t("보스 알림"),a("보스가 곧 출현합니다! 준비하세요.")):"barrier"===e?(t("결계 시작 알림"),a("결계가 곧 시작됩니다!")):"custom"===e&&(t("사용자 알림"),a("사용자 알림입니다."))},I=e=>{x.includes(e)?h(x.filter(t=>t!==e)):h([...x,e])},A=async()=>{if(!("serviceWorker"in navigator)){alert("서비스워커를 지원하지 않는 브라우저입니다.");return}let e=await Notification.requestPermission();if("granted"!==e){alert("알림 권한이 필요합니다.");return}try{if("boss"===l){if(0===x.length){alert("적어도 하나 이상의 보스 출현 시간을 선택해주세요.");return}let e=x.sort().map(e=>"".concat(e," (").concat(n,"분 전").concat(u?", ".concat(d,"분 전"):"",")"));alert("다음 보스 출현 시간에 알림이 설정되었습니다:\n".concat(e.join("\n")))}else"barrier"===l?(alert("".concat(n,"분 전 1차 알림이 설정되었습니다.")),u&&alert("".concat(d,"분 전 2차 알림도 설정되었습니다."))):T()}catch(e){alert("알림 발송 중 오류가 발생했습니다: "+(e instanceof Error?e.message:e))}},T=async()=>{try{let t=await navigator.serviceWorker.ready;D(),t.active?t.active.postMessage({type:"SHOW_NOTIFICATION",payload:{title:e,body:r}}):"showNotification"in t?t.showNotification(e,{body:r,icon:"/images/icons/icon-192.png",badge:"/images/icons/icon-192.png"}):alert("알림을 표시할 수 없습니다. 브라우저를 다시 시작해 주세요.")}catch(e){alert("알림 발송 중 오류가 발생했습니다: "+(e instanceof Error?e.message:e))}},D=()=>{try{B.current&&(B.current.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLHOw0uCpUw8HFVyNswD/92UNChhTeKEOFgVMEwIMJ1RvcTkUABAJBjM/JSFLhcTcq2QZCFmLvPvvh0ICKHey3fasbxQGMGuZxO3SfiwEDThqiLitYw8bChhJcZOWfEgaJUdwg4RtVDRHbqCkfU4LBwonWICThWI8Hxc3bLjewIExCRIHTnmdr5JlQxoMDiRpvfLNdxkJFDBjnruDVS5BZo+VdVAvFgcOH0lzmKyOaEMTBApRptXirWcHChIcTI+9sXpEHQQVK1uJt7mUakUVCQ8zV5vS6bpjCwYQK2l9kJeWdGhCHQgECzRnmczxvGYOAwcmW5Sxuoh3XDwsCgQHK16i4vzCZwoACClkkMLmrGQQBAIaQ4HB8s13EAEFKmuYvaM+EQVPjKqRTxQECChRj9LqsGIMaqqXWBEDCjJikNDosWYaFjs6HTYmXJ3L4q5eDwEEI2mpyrGINxQMVYSYgUQTAx5SksrpqVwSERIhZKTEqWEkRHGJgjkYBh1ZnN/1rFQAzLd9NQwXK16KrsaBNw87cacxCQYkW5Czlk8QEy9heIFqYTtJdaGibjsRChVFgMLhu10ACjRrqMWgSwcSRWsZ0tSicx9Qha8zBgBZqN1nBgxLjsNcAwAgUICiUDIRB7eYMw1Lj8gAACBKfblUFwYHDFCO1LAAABtJer1fHgMA1tIAAHSiRBQKAuH/wFgUDqcAADCCTrBbGyMv/a43JwLQ7rC5Tg8ACUA/hFMwGARCqqsGAItdMRkO+qMFAA==",B.current.oncanplaythrough=()=>{var e;null===(e=B.current)||void 0===e||e.play().catch(e=>{E(!0)})},B.current.onerror=()=>{E(!0)})}catch(e){E(!0)}},_=e=>{w(v.filter(t=>t.id!==e))};return(0,s.jsxs)("div",{className:"p-3 sm:p-4 border rounded bg-white dark:bg-gray-800 w-full max-w-md mx-auto my-4 sm:my-8 shadow-md sm:shadow-lg",children:[(0,s.jsx)("h2",{className:"text-base sm:text-lg font-bold mb-3",children:"푸시 알림 설정"}),M&&(0,s.jsx)("div",{className:"mb-3 p-2 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded text-xs",children:"알림음 재생에 문제가 발생했습니다. 사용 중인 브라우저에서 자동 재생이 차단되었거나 지원되지 않을 수 있습니다."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm mb-2",children:"알림 유형"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm rounded-full border ".concat("barrier"===l?"bg-blue-500 text-white":"bg-gray-100"),onClick:()=>S("barrier"),children:"결계 알림"}),(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm rounded-full border ".concat("boss"===l?"bg-blue-500 text-white":"bg-gray-100"),onClick:()=>S("boss"),children:"보스 알림"}),(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm rounded-full border ".concat("custom"===l?"bg-blue-500 text-white":"bg-gray-100"),onClick:()=>{S("custom"),y(!1)},children:"즉시 알림"})]}),(0,s.jsxs)("button",{className:"mt-2 text-xs text-blue-500 hover:text-blue-700 flex items-center",onClick:()=>y(!f),children:[(0,s.jsx)("span",{className:"mr-1",children:f?"▼":"▶"}),"사용자 정의 알림 설정"]})]}),"barrier"===l&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded border",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"알림 시간 설정"}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs mb-1",children:[(0,s.jsx)("span",{className:"mr-2",children:"1차 알림:"}),(0,s.jsx)("input",{type:"number",min:"1",max:"60",className:"w-16 border px-2 py-1 rounded text-sm bg-white dark:bg-gray-600",value:n,onChange:e=>c(parseInt(e.target.value)||10)}),(0,s.jsx)("span",{className:"ml-1",children:"분 전"})]})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs",children:[(0,s.jsx)("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{children:"2차 알림 사용"})]})}),u&&(0,s.jsx)("div",{className:"mb-2 ml-5",children:(0,s.jsxs)("label",{className:"flex items-center text-xs mb-1",children:[(0,s.jsx)("span",{className:"mr-2",children:"2차 알림:"}),(0,s.jsx)("input",{type:"number",min:"1",max:"60",className:"w-16 border px-2 py-1 rounded text-sm bg-white dark:bg-gray-600",value:d,onChange:e=>m(parseInt(e.target.value)||5)}),(0,s.jsx)("span",{className:"ml-1",children:"분 전"})]})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs",children:[(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:e=>b(e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{children:"결계 시작 시점에도 알림"})]})})]}),"boss"===l&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded border",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"보스 출현 알림 설정"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-xs mb-2",children:"출현 시간 선택:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,s.jsx)("button",{className:"px-3 py-1 text-xs rounded-full border ".concat(x.includes(e)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-600"),onClick:()=>I(e),children:e},e))})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs mb-1",children:[(0,s.jsx)("span",{className:"mr-2",children:"1차 알림:"}),(0,s.jsx)("input",{type:"number",min:"1",max:"60",className:"w-16 border px-2 py-1 rounded text-sm bg-white dark:bg-gray-600",value:n,onChange:e=>c(parseInt(e.target.value)||10)}),(0,s.jsx)("span",{className:"ml-1",children:"분 전"})]})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs",children:[(0,s.jsx)("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{children:"2차 알림 사용"})]})}),u&&(0,s.jsx)("div",{className:"mb-2 ml-5",children:(0,s.jsxs)("label",{className:"flex items-center text-xs mb-1",children:[(0,s.jsx)("span",{className:"mr-2",children:"2차 알림:"}),(0,s.jsx)("input",{type:"number",min:"1",max:"60",className:"w-16 border px-2 py-1 rounded text-sm bg-white dark:bg-gray-600",value:d,onChange:e=>m(parseInt(e.target.value)||5)}),(0,s.jsx)("span",{className:"ml-1",children:"분 전"})]})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("label",{className:"flex items-center text-xs",children:[(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:e=>b(e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{children:"보스 등장 시점에도 알림"})]})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"알림 내용"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",htmlFor:"push-title",children:"제목"}),(0,s.jsx)("input",{id:"push-title",className:"w-full border px-2 py-1 rounded text-sm bg-gray-50 dark:bg-gray-700",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",htmlFor:"push-body",children:"내용"}),(0,s.jsx)("input",{id:"push-body",className:"w-full border px-2 py-1 rounded text-sm bg-gray-50 dark:bg-gray-700",value:r,onChange:e=>a(e.target.value)})]})]}),(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm w-full transition",onClick:A,type:"button",children:"custom"===l?"즉시 알림 보내기":"알림 설정하기"}),f&&(0,s.jsxs)("div",{className:"mt-4 border-t pt-3",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"사용자 정의 알림 설정"}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded border",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",htmlFor:"alarm-time",children:"알림 시간"}),(0,s.jsx)("input",{id:"alarm-time",type:"time",className:"w-full border px-2 py-1 rounded text-sm bg-white dark:bg-gray-600",value:C,onChange:e=>j(e.target.value)})]}),(0,s.jsx)("button",{className:"w-full bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs mt-1",onClick:()=>{if(!e.trim()){alert("알림 제목을 입력해주세요.");return}w([...v,{id:N,title:e,body:r,time:C}]),F(N+1)},type:"button",children:"알림 추가"})]}),v.length>0&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold mb-1",children:"설정된 알림 목록"}),(0,s.jsx)("div",{className:"max-h-48 overflow-y-auto",children:v.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 border-b text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold",children:e.title}),(0,s.jsxs)("div",{className:"text-gray-500",children:[e.time," • ",e.body]})]}),(0,s.jsx)("button",{className:"text-red-500 hover:text-red-700 ml-2",onClick:()=>_(e.id),children:"삭제"})]},e.id))})]})]}),(0,s.jsx)("audio",{ref:B,preload:"auto"})]})}var N=r(8954),F=e=>{let{open:t,title:r,description:a,confirmText:l="확인",cancelText:o="취소",onConfirm:n,onCancel:c}=e,d=(0,i.useRef)(null),m=(0,i.useRef)(null),{glassEffectIntensity:u}=(0,N.fl)();return((0,i.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&c()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,c]),(0,i.useEffect)(()=>{if(!t)return;let e=e=>{d.current&&!d.current.contains(e.target)&&c()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[t,c]),(0,i.useEffect)(()=>{t&&m.current&&m.current.focus()},[t]),t)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent",children:(0,s.jsxs)("div",{ref:d,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-xs w-full px-4 py-4 animate-fadeIn glass-effect",style:{"--glass-effect-blur":"".concat(u,"px")},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,s.jsx)("h2",{id:"modal-title",className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:r}),a&&(0,s.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-200 mb-4 whitespace-pre-line min-h-[2.5rem]",children:a}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{ref:m,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",onClick:c,type:"button",children:o}),(0,s.jsx)("button",{className:"px-3 py-1 rounded bg-red-500 hover:bg-red-600 text-white text-sm font-semibold",onClick:n,type:"button",children:l})]})]})}):null};let B={blue:{bg:"#3B82F6",color:"#fff"},green:{bg:"#22C55E",color:"#fff"},pink:{bg:"#EC4899",color:"#fff"},orange:{bg:"#F59E42",color:"#fff"},purple:{bg:"#A78BFA",color:"#fff"},gray:{bg:"#6B7280",color:"#fff"},yellow:{bg:"#FACC15",color:"#fff"}};function M(e){let{size:t=32,accent:r="blue"}=e,{bg:a,color:l}=B[r]||B.blue;return(0,s.jsxs)("svg",{width:t,height:t,viewBox:"0 0 40 40",fill:"none",children:[(0,s.jsx)("ellipse",{cx:"22",cy:"34",rx:"6",ry:"2",fill:"#000",fillOpacity:"0.12"}),(0,s.jsxs)("g",{transform:"rotate(-18 20 20)",children:[(0,s.jsx)("ellipse",{cx:"20",cy:"13",rx:"6",ry:"5",fill:l,stroke:a,strokeWidth:"2"}),(0,s.jsx)("rect",{x:"18.5",y:"13",width:"3",height:"10",rx:"1.5",fill:a}),(0,s.jsx)("rect",{x:"19.25",y:"22",width:"1.5",height:"5",rx:"0.75",fill:a}),(0,s.jsx)("ellipse",{cx:"21",cy:"12",rx:"1.2",ry:"0.7",fill:"#fff",fillOpacity:"0.5"})]})]})}r(2887);let E=()=>{let{characters:e,selectedCharacterId:t,deleteCharacter:r,selectCharacter:a,addCharacter:l,updateCharacter:o}=n(),{servers:c}=function(){let{game:e="mabinogi_mobile",initialServers:t=[],retryCount:r=3,retryDelay:s=1e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[a,l]=(0,i.useState)(t),[o,n]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[m,u]=(0,i.useState)(0);(0,i.useEffect)(()=>{let e=async t=>{try{n(!0);let e=await fetch("/api/users/characters?servers=list");if(!e.ok)throw Error("서버 응답 오류: ".concat(e.status));let t=await e.json();t.servers&&t.servers.length>0&&(l(t.servers),u(0)),d(null)}catch(l){let a=l instanceof Error?l:Error(String(l));d(a),t<r&&setTimeout(()=>{u(t+1),e(t+1)},s)}finally{n(!1)}};return e(m),()=>{}},[e,s,r,m]);let g=a.length>0?a:t;return{servers:g,isLoading:o,error:c,retryFetch:()=>u(0)}}({initialServers:["데이안","아이라","던컨","알리사","메이븐","라사","칼릭스"]}),[d,m]=(0,i.useState)(!1),[u,g]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[p,b]=(0,i.useState)(null),[f,y]=(0,i.useState)(""),[C,j]=(0,i.useState)(""),[v,k]=(0,i.useState)(""),[w,N]=(0,i.useState)(null),B=()=>{if(!u.trim())return;let e=Math.random().toString(36).slice(2,10);l({id:e,type:"custom",name:u.trim(),server:x,level:1,experience:0,settings:{position:{x:0,y:0},size:"medium",opacity:1,isHidden:!1,useAnimation:!1,recordHistory:!1,theme:"default",notifications:{dailyTasks:!0,events:!0,notices:!0,bardBoard:!0,fashionItems:!0,guildNews:!0,popularPosts:!0},quietHours:{enabled:!1,start:0,end:0}}}),m(!1),g(""),h(""),k("")},M=e=>{f.trim()&&(o(e,{name:f.trim(),server:C}),b(null),y(""),j(""))},E=e=>{b(e.id),y(e.name),j(e.server)};return(0,s.jsxs)("div",{className:"bg-gray-50 rounded shadow p-3 sm:p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"font-bold mr-2",children:"내 캐릭터"}),(0,s.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 bg-green-500 text-white rounded text-sm flex items-center gap-1 hover:bg-green-600 transition-colors",onClick:()=>m(!0),disabled:d,children:"+ 추가"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[0===e.length&&(0,s.jsx)("div",{className:"w-full text-center py-3 bg-gray-50 rounded border border-gray-200",children:(0,s.jsxs)("span",{className:"text-gray-500",children:["아직 등록된 캐릭터가 없습니다. ",(0,s.jsx)("b",{children:"+ 추가"})," 버튼을 눌러 캐릭터를 등록해보세요!"]})}),e.map(e=>(0,s.jsx)("div",{className:"flex items-center px-3 py-2 rounded-ios-medium border transition-all ".concat(t===e.id?"bg-ios-blue/15 border-ios-blue/80 shadow-sm":"bg-white/90 border-gray-200 hover:border-gray-300"," ").concat(p===e.id?"w-full":"cursor-pointer"),onClick:()=>p!==e.id&&a(e.id),children:p===e.id?(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsx)("div",{className:"sm:col-span-1 md:col-span-2",children:(0,s.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),className:"border px-3 py-2 rounded-ios-full text-subhead w-full",onClick:e=>e.stopPropagation(),autoFocus:!0,placeholder:"캐릭터 이름",maxLength:20,onKeyDown:t=>{"Enter"===t.key&&M(e.id)}})}),(0,s.jsx)("div",{className:"sm:col-span-1 md:col-span-1",children:(0,s.jsxs)("select",{value:C,onChange:e=>j(e.target.value),className:"border px-3 py-2 rounded-ios-full text-subhead w-full bg-white appearance-none",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("option",{value:"",children:"서버(선택)"}),c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsxs)("div",{className:"flex justify-end sm:col-span-2 md:col-span-1 gap-2",children:[(0,s.jsx)("button",{type:"button",className:"bg-ios-blue hover:bg-ios-blue/90 active:scale-[0.98] text-white rounded-ios-full px-4 py-2 text-subhead transition-all shadow-sm flex-1 sm:flex-none",onClick:t=>{t.stopPropagation(),M(e.id)},disabled:!f.trim(),children:"저장"}),(0,s.jsx)("button",{type:"button",className:"bg-gray-200 hover:bg-gray-300 active:scale-[0.98] text-gray-700 rounded-ios-full px-4 py-2 text-subhead transition-all dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 flex-1 sm:flex-none",onClick:e=>{e.stopPropagation(),b(null),y(""),j("")},children:"취소"})]})]})}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.server&&(0,s.jsx)("span",{className:"text-footnote text-gray-500 ml-1.5",children:e.server}),(0,s.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),E(e)},className:"p-1.5 text-gray-500 hover:text-ios-blue rounded-full hover:bg-gray-100/80 transition-colors dark:hover:bg-gray-700 dark:hover:text-ios-teal",title:"편집",children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,s.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),N(e)},className:"p-1.5 text-gray-500 hover:text-ios-red rounded-full hover:bg-gray-100/80 transition-colors dark:hover:bg-gray-700",title:"삭제",children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M3 6h18"}),(0,s.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,s.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})},e.id))]}),d&&(0,s.jsxs)("div",{className:"border p-3 rounded-ios-medium bg-white/90 backdrop-blur-ios shadow-ios-sm mt-2",children:[v&&(0,s.jsx)("div",{className:"text-xs text-red-500 mb-1 text-left w-full",children:v}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full min-h-[44px]",children:[(0,s.jsxs)("div",{className:"relative",style:{minWidth:"6.5rem",maxWidth:"12rem"},children:[(0,s.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"block border px-2 py-1 pr-8 rounded-ios-full text-subhead bg-white",style:{width:"".concat((x?x.length:5)+5,"ch"),minWidth:"6.5rem",maxWidth:"12rem"},children:[(0,s.jsx)("option",{value:"",children:"서버(선택)"}),c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.06l3.71-3.83a.75.75 0 1 1 1.08 1.04l-4.25 4.39a.75.75 0 0 1-1.08 0L5.21 8.27a.75.75 0 0 1 .02-1.06z"})})})]}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("input",{type:"text",value:u,onChange:e=>{let t=e.target.value;g(t),t.length>20?k("캐릭터명은 20자 이내로 입력해주세요."):k("")},className:"border px-2 py-1 rounded-ios-full text-subhead ".concat(v?"border-red-400":""),placeholder:"캐릭터명 입력(20자 제한)",style:{minWidth:"12.5rem",width:"".concat(Math.max(12.5,1.1*u.length+8),"ch")},maxLength:20,onKeyDown:e=>{"Enter"===e.key&&u.trim()&&!v&&B()},autoFocus:!0})}),(0,s.jsxs)("div",{className:"flex flex-row gap-1 min-w-[100px]",children:[(0,s.jsx)("button",{type:"button",className:"w-12 px-0 py-1 rounded-ios-full text-subhead transition-all shadow-sm text-sm ".concat(!u.trim()||v?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-ios-blue hover:bg-ios-blue/90 text-white active:scale-[0.98]"),onClick:B,disabled:!u.trim()||!!v,children:"추가"}),(0,s.jsx)("button",{type:"button",className:"w-12 px-0 py-1 bg-gray-200 hover:bg-gray-300 active:scale-[0.98] text-gray-700 rounded-ios-full text-subhead transition-all dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 text-sm",onClick:()=>{m(!1),g(""),h(""),k("")},children:"취소"})]})]})]}),(0,s.jsx)(F,{open:!!w,title:"캐릭터 삭제 확인",description:'정말로 "'.concat(null==w?void 0:w.name,'" 캐릭터를 삭제하시겠습니까?\n이 작업은 복구가 불가능합니다.'),confirmText:"영구 삭제",cancelText:"취소",onConfirm:()=>{w&&(r(w.id),N(null))},onCancel:()=>N(null)})]})},S=e=>{let{characterId:t}=e,[r,a]=(0,i.useState)(!0);return(0,s.jsxs)("div",{className:"bg-blue-50 rounded shadow p-3 sm:p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer select-none",onClick:()=>a(e=>!e),children:[(0,s.jsx)("span",{className:"font-bold mr-2 text-blue-700",children:"할 일 목록"}),(0,s.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(일일/주간 미션 관리)"}),(0,s.jsx)("span",{className:"ml-auto",children:(0,s.jsx)(M,{size:28,accent:r?"purple":"gray"})})]}),r&&(0,s.jsx)(v,{children:(0,s.jsx)(j,{characterId:t})})]})};function I(){let{characters:e,selectedCharacterId:t}=n();return(0,s.jsxs)("div",{className:"w-[70vw] mx-auto flex flex-col items-center justify-center space-y-6 sm:space-y-8 py-4 sm:py-8",children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold text-center text-blue-700 drop-shadow mb-2",children:"MMGG - 마비노기 모바일"}),(0,s.jsxs)("p",{className:"text-base sm:text-lg text-center text-gray-700 max-w-3xl px-2 mb-2",children:[(0,s.jsx)("span",{className:"font-bold text-blue-600",children:"마비노기 모바일"}),"의 모든 정보를 한 곳에서 쉽고 빠르게\uD83D\uDE0E",(0,s.jsx)("br",{}),"룬 도감, 코디 도감, 가이드를 확인해요."]}),(0,s.jsxs)("div",{className:"w-full max-w-3xl mx-auto px-2 sm:px-4",children:[(0,s.jsx)(E,{}),e.length>0?(0,s.jsx)(S,{characterId:t||e[0].id}):(0,s.jsxs)("div",{className:"bg-blue-50 rounded shadow p-3 sm:p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"font-bold mr-2 text-blue-700",children:"할 일 목록"}),(0,s.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(일일/주간 미션 관리)"}),(0,s.jsx)("span",{className:"ml-auto text-blue-500 text-lg",children:"▼"})]}),(0,s.jsx)("div",{className:"text-gray-400 text-sm text-center py-4",children:"캐릭터를 먼저 등록하면 할 일 목록을 사용할 수 있습니다."})]}),(0,s.jsxs)("div",{className:"bg-indigo-50 rounded shadow p-3 sm:p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"font-bold mr-2 text-indigo-700",children:"푸시 알림"}),(0,s.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(보스/결계 알림 설정)"})]}),(0,s.jsx)(w,{})]})]})]})}},2887:function(){"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{let e=await navigator.serviceWorker.register("/sw.js");if("PushManager"in window)try{await e.pushManager.getSubscription()}catch(e){}}catch(e){}}),navigator.serviceWorker.controller,navigator.serviceWorker.addEventListener("controllerchange",()=>{}))},8954:function(e,t,r){"use strict";r.d(t,{Gj:function(){return i},fl:function(){return c},gz:function(){return d}});var s=r(5068),a=r(8965),l=r(9115),o=r(4810);let n={blue:{name:"Apple Blue",themeColor:"#007AFF",backgroundColor:"#F6F8FA",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#0A84FF",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"},green:{name:"Apple Green",themeColor:"#34C759",backgroundColor:"#F6FAF6",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#30D158",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"},gray:{name:"Apple Gray",themeColor:"#8E8E93",backgroundColor:"#F7F7F7",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#8E8E93",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"},purple:{name:"Apple Purple",themeColor:"#AF52DE",backgroundColor:"#F8F6FA",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#BF5AF2",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"},pink:{name:"Apple Pink",themeColor:"#FF2D55",backgroundColor:"#FAF6F8",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#FF375F",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"},orange:{name:"Apple Orange",themeColor:"#FF9500",backgroundColor:"#FFF8F2",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#FF9F0A",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"}},i=(0,a._)((0,s._)({},n),{custom:{name:"사용자 지정",themeColor:"#007AFF",backgroundColor:"#F2F2F7",menuFontColor:"#222",menuBgColor:"#fff",menuBorderColor:"#E5E7EB",darkThemeColor:"#0A84FF",darkBackgroundColor:"#181A1B",darkMenuFontColor:"#fff",darkMenuBgColor:"#222",darkMenuBorderColor:"#333"}}),c=(0,l.U)()((0,o.tJ)(e=>({preset:"blue",custom:(0,s._)({},i.custom),isDark:!1,isGlassEffect:!0,glassEffectIntensity:10,currentFont:"Pretendard-Regular",customFonts:[],fontSettings:{bodyFont:"Pretendard-Regular",titleFont:"Pretendard-Regular",bodyFontWeight:"normal",titleFontWeight:"normal"},setGlassEffect:t=>e({isGlassEffect:t}),setGlassEffectIntensity:t=>e({glassEffectIntensity:Math.max(0,Math.min(20,t))}),setCurrentFont:t=>e({currentFont:t}),setBodyFont:t=>e(e=>({fontSettings:(0,a._)((0,s._)({},e.fontSettings),{bodyFont:t})})),setTitleFont:t=>e(e=>({fontSettings:(0,a._)((0,s._)({},e.fontSettings),{titleFont:t})})),setBodyFontWeight:t=>e(e=>({fontSettings:(0,a._)((0,s._)({},e.fontSettings),{bodyFontWeight:t})})),setTitleFontWeight:t=>e(e=>({fontSettings:(0,a._)((0,s._)({},e.fontSettings),{titleFontWeight:t})})),addCustomFont:t=>e(e=>{let r=e.customFonts.findIndex(e=>e.family===t.family);if(!(r>=0))return{customFonts:[...e.customFonts,t]};{let s=[...e.customFonts];return s[r]=t,{customFonts:s}}}),removeCustomFont:t=>e(e=>{let r=(0,s._)({},e.fontSettings);return r.bodyFont===t&&(r.bodyFont="Pretendard-Regular"),r.titleFont===t&&(r.titleFont="Pretendard-Regular"),{customFonts:e.customFonts.filter(e=>e.family!==t),currentFont:e.currentFont===t?"Pretendard-Regular":e.currentFont,fontSettings:r}}),setPreset:t=>e({preset:t}),setCustom:(t,r)=>e(e=>({custom:(0,a._)((0,s._)({},e.custom),{[t]:r})})),setIsDark:t=>{e({isDark:t}),localStorage.setItem("mmgg-dark",t?"1":"0")}}),{name:"theme-storage",onRehydrateStorage:()=>e=>{if(e){let t=localStorage.getItem("mmgg-dark");null!==t&&(e.isDark="1"===t)}}}));function d(e){let t="custom"===e.preset?e.custom:n[e.preset]||n.blue;return e.isDark?(0,a._)((0,s._)({},t),{themeColor:t.darkThemeColor||t.themeColor,backgroundColor:t.darkBackgroundColor||"#181A1B",menuFontColor:t.darkMenuFontColor||"#fff",menuBgColor:t.darkMenuBgColor||"#222",menuBorderColor:t.darkMenuBorderColor||"#333",name:t.name}):t}},4810:function(e,t,r){"use strict";r.d(t,{tJ:function(){return a}});let s=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>s(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},a=(e,t)=>(r,a,l)=>{let o,n={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var s;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),l=null!=(s=r.getItem(e))?s:null;return l instanceof Promise?l.then(a):a(l)},setItem:(e,s)=>r.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1,c=new Set,d=new Set,m=n.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...e)},a,l);let u=()=>{let e=n.partialize({...a()});return m.setItem(n.name,{state:e,version:n.version})},g=l.setState;l.setState=(e,t)=>{g(e,t),u()};let x=e((...e)=>{r(...e),u()},a,l);l.getInitialState=()=>x;let h=()=>{var e,t;if(!m)return;i=!1,c.forEach(e=>{var t;return e(null!=(t=a())?t:x)});let l=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=a())?e:x))||void 0;return s(m.getItem.bind(m))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[s,l]=e;if(r(o=n.merge(l,null!=(t=a())?t:x),!0),s)return u()}).then(()=>{null==l||l(o,void 0),o=a(),i=!0,d.forEach(e=>e(o))}).catch(e=>{null==l||l(void 0,e)})};return l.persist={setOptions:e=>{n={...n,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>i,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},n.skipHydration||h(),o||x}},9115:function(e,t,r){"use strict";r.d(t,{U:function(){return i}});var s=r(2265);let a=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,l={setState:s,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(s,a,l);return l},l=e=>e?a(e):a,o=e=>e,n=e=>{let t=l(e),r=e=>(function(e,t=o){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=e=>e?n(e):n}},function(e){e.O(0,[986,971,596,744],function(){return e(e.s=2379)}),_N_E=e.O()}]);